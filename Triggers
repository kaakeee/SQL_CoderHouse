/*Tablas en donde van los datos de los triggers*/

USE pyme_stickers;
/* tabla de log de nuevas facturas con sus montos y usuarios que crearon la trabla y/o modificaciones*/
CREATE TABLE new_facturacion (
id_factura INT PRIMARY KEY,
cuit_cuil VARCHAR(40),
total_compra DECIMAL(30,2),
user CHAR(30),
fecha_hora timestamp
);

/*tabla de registro de nuevas ventas, de la tabla pedidos */ 

CREATE TABLE new_pedidos(
id_pedido INT PRIMARY KEY,
cuit_cuil VARCHAR(40),
id_modelo DECIMAL(30,2),
cantidad DECIMAL(5,2),
user CHAR(30),
fecha_hora timestamp
);




/* primer trigger que ve las modificaciones de la tabla facturacion*/

CREATE TRIGGER tr_facturas
AFTER update ON facturacion /* despues del update*/  /* la tabla*/
FOR EACH ROW /*cada fila q se inserte*/
INSERT INTO new_facturacion (id_facura, cuit_cuil, total_compra, user, fecha_hora)  /*columna copia */
VALUES (NEW.id_factura, NEW.cuit_cuil, NEW.total_compra, user, fecha_hora);   /* la original*/
